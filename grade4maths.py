import streamlit as st

# 1. ‡∂¥‡∑í‡∂ß‡∑î‡∑Ä‡∑ö ‡∂∏‡∑ñ‡∂Ω‡∑í‡∂ö ‡∑É‡∑ê‡∂ö‡∑É‡∑î‡∂∏‡∑ä
st.set_page_config(page_title="Grade 4 Maths Master", page_icon="üßÆ", layout="centered")

# --- ‡∂Ω‡∑É‡∑ä‡∑É‡∂± ‡∂¥‡∑ô‡∂±‡∑î‡∂∏ ‡∑É‡∂≥‡∑Ñ‡∑è CSS ---
st.markdown("""
<style>
    .stApp { background-color: #0f172a; }
    .q-card {
        background: #1e293b;
        padding: 20px;
        border-radius: 15px;
        border-left: 8px solid #facc15;
        margin-bottom: 25px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    .question-text {
        color: #ffffff;
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 15px;
    }
    .score-container {
        position: fixed;
        top: 50px;
        right: 20px;
        background: #ff0000;
        color: white;
        padding: 15px;
        border-radius: 10px;
        font-weight: bold;
        z-index: 1000;
    }
    h1 { color: #facc15 !important; text-align: center; text-shadow: 2px 2px #000; }
</style>
""", unsafe_allow_html=True)

# --- Session State (‡∂Ω‡∂ö‡∑î‡∂´‡∑î ‡∂ú‡∂´‡∂±‡∂∫‡∂ß) ---
if 'score' not in st.session_state:
    st.session_state.score = 0
if 'answered' not in st.session_state:
    st.session_state.answered = {}

# --- ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± 50 (PDF ‡∂ë‡∂ö ‡∂á‡∑É‡∑î‡∂ª‡∑í‡∂±‡∑ä) ---
# (‡∂ö‡∑ö‡∂≠‡∂∫ ‡∂ö‡∑ô‡∂ß‡∑í ‡∂ö‡∑í‡∂ª‡∑ì‡∂∏‡∂ß ‡∂∏‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± ‡∂ö‡∑í‡∑Ñ‡∑í‡∂¥‡∂∫‡∂ö‡∑ä ‡∂∏‡∑ô‡∂≠‡∑ê‡∂± ‡∂¥‡∑ô‡∂±‡∑ä‡∑Ä‡∂±‡∑Ä‡∑è, ‡∑É‡∂∏‡∑ä‡∂¥‡∑ñ‡∂ª‡∑ä‡∂´ 50‡∂∏ ‡∂á‡∂≠‡∑î‡∑Ö‡∂≠‡∑ä ‡∂ö‡∂ª ‡∂á‡∂≠)
QUESTIONS = [
    {"q": "8052 ‡∑É‡∂Ç‡∂õ‡∑ä‚Äç‡∂∫‡∑è‡∑Ä ‡∂Ö‡∂ö‡∑î‡∂ª‡∑ô‡∂±‡∑ä ‡∂Ω‡∑í‡∂∫‡∑ñ ‡∑Ä‡∑í‡∂ß?", "options": ["‡∂Ö‡∂ß‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂¥‡∂±‡∑É‡∑ä ‡∂Ø‡∑ô‡∂ö", "‡∂Ö‡∂ß‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂¥‡∂±‡∑ä‡∑É‡∑í‡∂∫ ‡∂Ø‡∑ô‡∂ö", "‡∂Ö‡∂ß‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂¥‡∂±‡∑ä‡∑É‡∑í‡∂∫ ‡∑Ä‡∑í‡∑É‡∑ä‡∑É"], "a": "‡∂Ö‡∂ß‡∂Ø‡∑Ñ‡∑É‡∑ä ‡∂¥‡∂±‡∑É‡∑ä ‡∂Ø‡∑ô‡∂ö"},
    {"q": "450 + 320 ‡∑Ñ‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["770", "870", "750"], "a": "770"},
    {"q": "900 - 450 ‡∑Ñ‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["450", "550", "350"], "a": "450"},
    {"q": "‡∂≠‡∑ä‚Äç‡∂ª‡∑í‡∂ö‡∑ù‡∂´‡∂∫‡∂ö‡∂ß ‡∑Å‡∑ì‡∂ª‡∑ä‡∑Ç ‡∂ö‡∑ì‡∂∫‡∂ö‡∑ä ‡∂≠‡∑í‡∂∂‡∑ö‡∂Ø?", "options": ["2", "3", "4"], "a": "3"},
    {"q": "‡∂ª‡∑î‡∂¥‡∑í‡∂∫‡∂Ω‡∑ä 100 ‡∂±‡∑ù‡∂ß‡∑ä‡∂ß‡∑î‡∑Ä‡∂ö‡∂ß ‡∂ª‡∑î‡∂¥‡∑í‡∂∫‡∂Ω‡∑ä 20 ‡∂±‡∑ù‡∂ß‡∑ä‡∂ß‡∑î ‡∂ö‡∑ì‡∂∫‡∂ö‡∑ä ‡∂Ω‡∑ê‡∂∂‡∑ö‡∂Ø?", "options": ["4", "5", "10"], "a": "5"},
    {"q": "‡∑É‡∑ò‡∂¢‡∑î‡∂ö‡∑ù‡∂´‡∑è‡∑É‡∑ä‚Äç‡∂ª‡∂∫‡∂ö ‡∂á‡∂≠‡∑í ‡∂¥‡∑ê‡∂≠‡∑í ‡∂ú‡∂´‡∂± ‡∂ö‡∑ì‡∂∫‡∂Ø?", "options": ["3", "4", "5"], "a": "4"},
    {"q": "7 x 8 ‡∑Ñ‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂ö‡∑î‡∂∏‡∂ö‡∑ä‡∂Ø?", "options": ["54", "56", "64"], "a": "56"},
    {"q": "‡∂Ω‡∑ì‡∂ß‡∂ª‡∑ä 1 ‡∂ö ‡∂∏‡∑í‡∂Ω‡∑í ‡∂Ω‡∑ì‡∂ß‡∂ª‡∑ä ‡∂ö‡∑ì‡∂∫‡∂ö‡∑ä ‡∂≠‡∑í‡∂∂‡∑ö‡∂Ø?", "options": ["100", "500", "1000"], "a": "1000"},
    {"q": "‡∑Ä‡∂ª‡∑ä‡∂ú‡∂¢ ‡∂∏‡∑ì‡∂ß‡∂ª‡∂∫‡∂ö‡∑ä ‡∂∫‡∂±‡∑î ‡∂ö‡∑î‡∂∏‡∂± ‡∂∏‡∑í‡∂±‡∑î‡∂∏‡∑ä ‡∂í‡∂ö‡∂ö‡∂∫‡∂ö‡∑ä‡∂Ø?", "options": ["‡∂∂‡∂ª", "‡∂Ø‡∑í‡∂ú", "‡∑Ä‡∂ª‡∑ä‡∂ú‡∂µ‡∂Ω‡∂∫"], "a": "‡∑Ä‡∂ª‡∑ä‡∂ú‡∂µ‡∂Ω‡∂∫"},
    {"q": "‡∂¥‡∑ê‡∂∫ 1 ‡∂ö‡∂ß ‡∂∏‡∑í‡∂±‡∑í‡∂≠‡∑ä‡∂≠‡∑î ‡∂ö‡∑ì‡∂∫‡∂ö‡∑ä ‡∂≠‡∑í‡∂∂‡∑ö‡∂Ø?", "options": ["30", "60", "100"], "a": "60"},
    # ... ‡∂∏‡∑ô‡∂≠‡∑ê‡∂±‡∂ß ‡∂≠‡∑Ä‡∂≠‡∑ä ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± 40‡∂ö‡∑ä ‡∂ë‡∂ö‡∑ä ‡∂ö‡∑Ö ‡∑Ñ‡∑ê‡∂ö ...
]

# --- UI ‡∂Ü‡∂ª‡∂∏‡∑ä‡∂∑‡∂∫ ---
st.markdown("<h1>üéì 4 ‡∑Å‡∑ä‚Äç‡∂ª‡∑ö‡∂´‡∑í‡∂∫ - ‡∂ú‡∂´‡∑í‡∂≠‡∂∫ ‡∂Ø‡∂ö‡∑ä‡∑Ç‡∂∫‡∑è</h1>", unsafe_allow_html=True)
st.markdown(f'<div class="score-container">‡∂Ω‡∂ö‡∑î‡∂´‡∑î: {st.session_state.score} / 50</div>', unsafe_allow_html=True)

for i, q in enumerate(QUESTIONS):
    st.markdown(f'''
        <div class="q-card">
            <div class="question-text">{i+1}. {q['q']}</div>
        </div>
    ''', unsafe_allow_html=True)
    
    # ‡∂∫‡∑ñ‡∑É‡∂ª‡∑ä ‡∂ã‡∂≠‡∑ä‡∂≠‡∂ª‡∂∫ ‡∂≠‡∑ù‡∂ª‡∂± ‡∂≠‡∑ê‡∂±
    choice = st.radio(f"‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª ‡∂≠‡∑ù‡∂ª‡∂±‡∑ä‡∂± {i+1}", q['options'], key=f"q_{i}", label_visibility="collapsed")
    
    if st.button(f"‡∂≠‡∑Ñ‡∑Ä‡∑î‡∂ª‡∑î ‡∂ö‡∂ª‡∂±‡∑ä‡∂± {i+1}", key=f"btn_{i}"):
        if i not in st.session_state.answered:
            if choice == q['a']:
                st.success(f"‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í! ‚úÖ (‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª: {q['a']})")
                st.session_state.score += 1
            else:
                st.error(f"‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í‡∂∫‡∑í! ‚ùå (‡∂±‡∑í‡∑Ä‡∑ê‡∂ª‡∂Ø‡∑í ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª: {q['a']})")
            st.session_state.answered[i] = True
        else:
            st.warning("‡∂î‡∂∂ ‡∂∏‡∑ô‡∂∏ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂±‡∂∫‡∂ß ‡∂¥‡∑í‡∑Ö‡∑í‡∂≠‡∑î‡∂ª‡∑î ‡∂Ø‡∑ì ‡∂Ö‡∑Ä‡∑É‡∂±‡∑ä!")

# --- ‡∂Ö‡∑Ä‡∑É‡∑è‡∂± ‡∂Ω‡∂ö‡∑î‡∂´‡∑î ---
if len(st.session_state.answered) == len(QUESTIONS):
    st.balloons()
    st.markdown(f"## üéâ ‡∑É‡∑î‡∂∑ ‡∂¥‡∑ê‡∂≠‡∑î‡∂∏‡∑ä! ‡∂î‡∂∂ ‡∂¥‡∑ä‚Äç‡∂ª‡∑Å‡∑ä‡∂± 50‡∂±‡∑ä {st.session_state.score} ‡∂ö‡∑ä ‡∂Ω‡∂∂‡∑è ‡∂ú‡∂≠‡∑ä‡∂≠‡∑è!")
